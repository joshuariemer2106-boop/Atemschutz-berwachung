<!doctype html>
<html lang="de">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Hauptmenue</title>
    <style>
      :root {
        --text: #f4f6ff;
        --muted: rgba(244, 246, 255, 0.78);
        --tile-bg: rgba(16, 20, 31, 0.44);
        --tile-line: rgba(255, 255, 255, 0.18);
        --dock-bg: rgba(8, 11, 19, 0.66);
      }

      * { box-sizing: border-box; }

      body {
        margin: 0;
        min-height: 100vh;
        color: var(--text);
        font-family: "Segoe UI", "Trebuchet MS", sans-serif;
        background:
          linear-gradient(120deg, rgba(7, 9, 18, 0.78), rgba(11, 16, 28, 0.58)),
          {% if menu_background_url %}url('{{ menu_background_url }}'){% else %}radial-gradient(1200px 800px at 52% 40%, #4b2cff 0%, #20104d 40%, #130a2e 70%, #090e1b 100%){% endif %};
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
      }

      .screen {
        min-height: 100vh;
        display: grid;
        grid-template-rows: auto 1fr auto;
      }

      .topbar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 12px;
        padding: 12px 18px;
        background: linear-gradient(180deg, rgba(8, 11, 18, 0.62), rgba(8, 11, 18, 0.1));
        border-bottom: 1px solid rgba(255, 255, 255, 0.14);
        backdrop-filter: blur(3px);
      }

      .top-left {
        font-size: 20px;
        font-weight: 700;
        letter-spacing: .4px;
      }

      .top-right {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }

      .chip {
        font-size: 12px;
        font-weight: 700;
        color: var(--muted);
        border: 1px solid rgba(255, 255, 255, 0.2);
        background: rgba(0, 0, 0, 0.25);
        border-radius: 999px;
        padding: 5px 10px;
      }

      .apps {
        align-self: start;
        padding: 26px 22px;
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
        gap: 16px;
        width: min(760px, 100%);
      }

      .app {
        text-decoration: none;
        color: var(--text);
        display: grid;
        justify-items: center;
        gap: 8px;
        padding: 10px 8px;
        border-radius: 12px;
        transition: transform .14s ease, background-color .14s ease, border-color .14s ease;
        border: 1px solid transparent;
      }

      .app:hover {
        transform: translateY(-2px);
        background: rgba(255, 255, 255, 0.08);
        border-color: rgba(255, 255, 255, 0.18);
      }

      .icon {
        width: 70px;
        height: 70px;
        border-radius: 18px;
        border: 1px solid var(--tile-line);
        background: var(--tile-bg);
        display: grid;
        place-items: center;
        font-size: 34px;
        box-shadow: 0 10px 26px rgba(0, 0, 0, 0.26), inset 0 1px 0 rgba(255, 255, 255, 0.08);
      }

      .label {
        text-align: center;
        font-size: 13px;
        line-height: 1.2;
        font-weight: 600;
        text-shadow: 0 1px 4px rgba(0, 0, 0, 0.45);
      }

      .disabled {
        opacity: 0.45;
        pointer-events: none;
      }

      .dock {
        margin: 0 auto 12px;
        width: min(700px, calc(100% - 24px));
        border-radius: 16px;
        border: 1px solid rgba(255, 255, 255, 0.18);
        background: var(--dock-bg);
        padding: 10px 12px;
        display: flex;
        justify-content: center;
        gap: 10px;
        backdrop-filter: blur(7px);
      }

      .dock-item {
        border: 0;
        border-radius: 10px;
        color: var(--text);
        font-size: 13px;
        font-weight: 700;
        padding: 8px 13px;
        background: rgba(255, 255, 255, 0.1);
      }

      .dock-item.logout {
        background: linear-gradient(180deg, #c42837, #861524);
      }

      .dock-item.home {
        background: linear-gradient(180deg, #2a8ed1, #1b5f8c);
      }

      @media (max-width: 740px) {
        .apps {
          grid-template-columns: repeat(3, minmax(0, 1fr));
          gap: 10px;
          padding: 16px 10px;
          width: 100%;
        }
        .icon {
          width: 58px;
          height: 58px;
          border-radius: 14px;
          font-size: 28px;
        }
        .top-left {
          font-size: 17px;
        }
        .chip {
          font-size: 11px;
          padding: 4px 8px;
        }
      }
    </style>
  </head>
  <body>
    <main class="screen">
      <header class="topbar">
        <div class="top-left">Einsatzsystem</div>
        <div class="top-right">
          <span class="chip">Rolle: {{ role_label }}</span>
          {% if server_name %}<span class="chip">Server: {{ server_name }}</span>{% endif %}
          {% if server_code %}<span class="chip">Code: {{ server_code }}</span>{% endif %}
        </div>
      </header>

      <section class="apps">
        <a class="app" href="/atemschutz">
          <div class="icon">O2</div>
          <div class="label">Atemschutz</div>
        </a>

        {% if can_access_reports %}
        <a class="app" href="/einsatzberichte">
          <div class="icon">EB</div>
          <div class="label">Einsatzberichte</div>
        </a>
        {% else %}
        <div class="app disabled">
          <div class="icon">EB</div>
          <div class="label">Einsatzberichte gesperrt</div>
        </div>
        {% endif %}

        {% if can_access_press %}
        <a class="app" href="/presse/bereich">
          <div class="icon">PR</div>
          <div class="label">Presse</div>
        </a>
        {% else %}
        <div class="app disabled">
          <div class="icon">PR</div>
          <div class="label">Presse gesperrt</div>
        </div>
        {% endif %}

        {% if can_access_staff_list %}
        <a class="app" href="/mitarbeiter">
          <div class="icon">ML</div>
          <div class="label">Mitarbeiterliste</div>
        </a>
        {% else %}
        <div class="app disabled">
          <div class="icon">ML</div>
          <div class="label">Mitarbeiterliste gesperrt</div>
        </div>
        {% endif %}

        {% if can_access_time_tracking %}
        <a class="app" href="/stempeluhr">
          <div class="icon">SZ</div>
          <div class="label">Stempeluhr</div>
        </a>
        {% else %}
        <div class="app disabled">
          <div class="icon">SZ</div>
          <div class="label">Stempeluhr gesperrt</div>
        </div>
        {% endif %}

        {% if can_access_email %}
        <a class="app" href="/email">
          <div class="icon">EM</div>
          <div class="label">E-Mail</div>
        </a>
        {% else %}
        <div class="app disabled">
          <div class="icon">EM</div>
          <div class="label">E-Mail gesperrt</div>
        </div>
        {% endif %}

        {% if can_access_owner_settings %}
        <a class="app" href="/owner/settings">
          <div class="icon">OP</div>
          <div class="label">Owner Einstellungen</div>
        </a>
        {% endif %}
      </section>

      <footer class="dock">
        <a class="dock-item home" href="/">Start</a>
        <a class="dock-item" href="/presse">Login</a>
        <form method="post" action="/presse/logout">
          <button class="dock-item logout" type="submit">Abmelden</button>
        </form>
      </footer>
    </main>
  </body>
</html>
